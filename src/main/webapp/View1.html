<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<!--<div style="background-color:black;color:white;padding:30px;">-->
<h2 style="display: flex; justify-content: flex-end">Welcome Praneeth</h2>
<h1 style="display: flex; justify-content: center"> Production Entries</h1>

<div style="display: flex; justify-content: space-between">
    <button type="button" onclick="addData()" width="100" height="100">add data</button>
    <button type="button" onclick="displayTable()">+</button>
</div>
<div id="UploadData" style="padding:20px;display: none;">
    <label>Upload Sales file: </label>
    <input type="file" id="salesFile" name="sales">
    <br>
    <label>Upload Purchases file: </label>
    <input type="file" id="purchasesFile" name="purchases">
    <br>
    <input type="submit">

</div>

<div id="TableDisplay" style="display: none;">
    <style>
  td, th {
  border: 1px solid #dddddd;
  text-align: left;
  padding: 8px;
}
</style>
    <table id="mytab1">
        <tr>
            <th>Product Name</th>
            <th>Purchase/Sales Quantity</th>
            <th>Purchase/Sales Amount</th>
            <th>Avg Cost</th>
            <th>Consumption Qty</th>
            <th>Consumption%</th>
            <th>Consumption cost</th>
            <th>Stock</th>
        </tr>

        <tr>
            <td>UD Cotton Seed</td>
            <td>54300</td>
            <td>1107946.00</td>
            <td>20.40</td>
            <td><input type="number" id="udcottonseed" name="consumptionQty" value="0" onchange="changeconsumptionqty(this.id)"></td>
            <td>0%</td>
            <td>0</td>
            <td>5985</td>
        </tr>

        <tr>
            <td>UD Hulls</td>
            <td>36695</td>
            <td>727709.00</td>
            <td>19.83</td>
            <td><input type="number" id="udhulls" name="consumptionQty" value="0" onchange="changeconsumptionqty(this.id)"></td>
            <td>0%</td>
            <td>0</td>
            <td>11000</td>
        </tr>

        <tr>
            <td>Rice Brawn</td>
            <td>4250</td>
            <td>199125.00</td>
            <td>46.85</td>
            <td><input type="number" id="ricebrawn" name="consumptionQty" value="0" onchange="changeconsumptionqty(this.id)"></td>
            <td>0%</td>
            <td>0</td>
            <td>-7875</td>
        </tr>

        <tr>
            <td>Rice Powder</td>
            <td>23050</td>
            <td>474150.00</td>
            <td>20.57</td>
            <td><input type="number" id="ricepowder" name="consumptionQty" value="0" onchange="changeconsumptionqty(this.id)"></td>
            <td>0%</td>
            <td>0</td>
            <td>17700</td>
        </tr>

        <tr>
            <td>Shell Powder</td>
            <td>10265</td>
            <td>92384.53</td>
            <td>9.00</td>
            <td><input type="number" id="shellpowder" name="consumptionQty" value="0" onchange="changeconsumptionqty(this.id)"></td>
            <td>0%</td>
            <td>0</td>
            <td>9010</td>
        </tr>

        <tr>
            <td>PDL Powder</td>
            <td>14990</td>
            <td>27000.00</td>
            <td>1.80</td>
            <td><input type="number" id="pdlpowder" name="consumptionQty" value="0" onchange="changeconsumptionqty(this.id)"></td>
            <td>0%</td>
            <td>0</td>
            <td>8500</td>
        </tr>

        <tr>
            <td>UD Gunny Bags</td>
            <td>3225</td>
            <td>105300.00</td>
            <td>32.65</td>
            <td><input type="number" id="udgunnybags" name="consumptionQty" value="0" onchange="changeconsumptionqty(this.id)"></td>
            <td>0%</td>
            <td>0</td>
            <td>1125</td>
        </tr>

        <tr>
            <td>Colour</td>
            <td>175</td>
            <td>45500.00</td>
            <td>260.00</td>
            <td><input type="number" id="colour" name="consumptionQty" value="0" onchange="changeconsumptionqty(this.id)"></td>
            <td>0%</td>
            <td>0</td>
            <td>25</td>
        </tr>

        <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td id="cqtotal">0</td>
            <td></td>
            <td id="cctotal">0</td>
            <td></td>
        </tr>
    </table>


</div>
<!--</div> -->


</body>
<script>
function addData() {
   var x = document.getElementById("UploadData");
  if (x.style.display === "none") {
    x.style.display = "block";
  } else {
    x.style.display = "none";
  }
}

function displayTable()
{   var x = document.getElementById("TableDisplay");
  if (x.style.display === "none")
  {
    x.style.display = "block";
  }
  else
  {
    x.style.display = "none";
  }
}

function changeconsumptionqty(input1)
{
	var consumptionQty=parseInt(document.getElementById(input1).value);
    var cqTotal=document.getElementById("cqtotal");

    cqTotal.innerHTML=consumptionQty+parseInt(cqTotal.innerHTML);


    var table = document.getElementById("mytab1");
    var ccTotal=document.getElementById("cctotal");
    ccTotal.innerHTML=0;
	for (var i = 1; i<table.rows.length; i++)
	{
        var temp= parseInt(document.getElementsByName("consumptionQty")[i-1].value);
        var col= table.rows[i].cells[5];
        col.innerHTML=(temp*100/parseInt(cqTotal.innerHTML)).toFixed(2)+"%";
		//table.rows[i].cells[3].innerHTML= (parseFloat(table.rows[i].cells[2].innerHTML) / parseInt(table.rows[i].cells[1].innerHTML)).toFixed(2);
 	    //consumption cost= consumption qty* avg cost
        var avgCost= parseFloat(table.rows[i].cells[3].innerHTML);
        var consumptionCost= (avgCost*temp).toFixed(2);
        table.rows[i].cells[6].innerHTML= consumptionCost;
    
        ccTotal.innerHTML= parseFloat(consumptionCost)+ parseFloat(ccTotal.innerHTML);

        var currentStock= table.rows[i].cells[1].innerHTML;
        table.rows[i].cells[7].innerHTML=currentStock-temp;
   	}
}

</script>
</html>
